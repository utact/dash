# 리포지토리 탐지 로직 개선 (Repository Detection Logic Refinement)

## 1. 개요 (Overview)
기존의 **리포지토리 수동 검색(Manual Search)** 기능을 제거하고, **브라우저 익스텐션 설정 재탐지(Re-detect)** 방식으로 변경했습니다.
이는 사용자가 익스텐션에 설정한 타겟 리포지토리와 대시보드 서비스가 인식하는 리포지토리가 불일치하여 발생할 수 있는 데이터 누락 및 꼬임 현상을 원천적으로 방지하기 위함입니다.

## 2. 변경 배경 (Context)
- **Problem**: 사용자가 익스텐션에서는 `Repo A`를 설정해두고, 온보딩 과정에서 실수로 `Repo B`를 수동 검색하여 등록하는 경우, 실제 커밋은 `Repo A`로 푸시되지만 서비스는 `Repo B`의 웹훅을 기다리는 상황이 발생합니다.
- **Solution**: 수동 입력을 차단하고, 오직 익스텐션이 주입(Injection)하는 메타데이터(`data-repo`, `data-hook`)만을 신뢰(Source of Truth)하도록 변경했습니다.

## 3. 구현 상세 (Implementation)
### 3.1 Frontend (`OnboardingStep5Repo.vue`)
- **자동 감지 (Auto Detection)**: 페이지 로드 시 DOM(`DashHub-dash-data`) 및 커스텀 이벤트(`DashHub-dash-ready`)를 통해 익스텐션 정보를 수집합니다.
- **재탐지 버튼 (Re-detect Button)**: 감지에 실패하거나 설정이 올바르지 않은 경우, 사용자가 익스텐션 설정을 변경한 후 **"설정 다시 탐지하기"** 버튼을 눌러 즉시 재확인할 수 있습니다.
- **가이드 제공**: 감지 실패 시, 구체적인 해결 단계(익스텐션 클릭 -> 인증 -> 리포지토리 선택)를 안내합니다.

### 3.2 Backend Interaction (`GitHubPushService`)
- **웹훅 필터링**: 백엔드는 모든 웹훅 이벤트를 수신하지만, `verifyDefenseAttempt` 로직에서 **현재 사용자가 등록한 리포지토리명**과 일치하는 이벤트만 처리합니다.
- **레거시 데이터 처리**: 사용자가 리포지토리를 변경하더라도, 이전 리포지토리에서 발생하는 웹훅은 로직상 무시되므로 데이터 무결성이 보장됩니다.

## 4. 기대 효과 (Expected Outcome)
1.  **설정 불일치 방지**: 사용자 실수로 인한 리포지토리 연결 오류가 0%로 수렴합니다.
2.  **UX 개선**: 복잡한 검색 과정 대신 "설정 -> 확인"의 단순한 흐름으로 변경되어 사용자 경험이 직관적으로 개선됩니다.

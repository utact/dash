<template>
  <div
    class="min-h-screen bg-slate-950 text-slate-100 flex flex-col selection:bg-indigo-500/30"
  >
    <!-- ë°°ê²½ -->
    <div v-if="!user" class="fixed inset-0 z-0 pointer-events-none">
      <div
        class="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-indigo-600/20 rounded-full blur-[120px] opacity-50 mix-blend-screen"
      ></div>
      <div
        class="absolute bottom-0 right-0 w-[800px] h-[600px] bg-blue-600/10 rounded-full blur-[100px] opacity-30"
      ></div>
      <div
        class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"
      ></div>
      <div
        class="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"
      ></div>
    </div>

    <div v-else class="fixed inset-0 z-0 pointer-events-none">
      <div
        class="absolute inset-0 bg-gradient-to-b from-slate-900 via-slate-850 to-slate-800 opacity-95"
      ></div>
      <div
        class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-5 mix-blend-overlay"
      ></div>
    </div>

    <!-- ë‚´ìš© -->
    <main class="relative z-10 flex-1">
      <template v-if="authChecked && !user">
        <section
          id="hero"
          class="container mx-auto px-6 pt-20 pb-16 text-center relative"
        >
          <h1
            class="text-5xl md:text-7xl font-bold tracking-tight mb-6 text-balance animate-fade-in-up"
          >
            ì•Œê³ ë¦¬ì¦˜ ìŠ¤í„°ë””, <br />
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-blue-400 to-cyan-400"
            >
              'ë°±ì¤€ ì œì¶œ'ë§Œ í•˜ì„¸ìš”.
            </span>
          </h1>
          <p
            class="text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-10 text-pretty animate-fade-in-up"
            style="animation-delay: 0.2s"
          >
            ê³µí†µ ëª©í‘œ ì„ ì •, ì„¤ëª…ì„ ìœ„í•œ ì£¼ì„, í˜•ì‹ì— ë§ëŠ” ì—…ë¡œë“œ...<br
              class="hidden md:block"
            />
            ë‹¹ì‹ ì˜
            <span class="text-indigo-400 font-semibold">ì‹¤íŒ¨í•œ ì½”ë“œ</span>ì¡°ì°¨
            ë…¸ë ¥ì˜ ì¦ê±°ë¡œ ë‚¨ê²¨ë“œë¦½ë‹ˆë‹¤.
          </p>

          <div
            class="flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-up"
            style="animation-delay: 0.3s"
          >
            <button
              @click="handleLogin"
              class="group relative inline-flex h-12 items-center justify-center overflow-hidden rounded-full bg-indigo-600 px-8 font-medium text-white transition-all duration-300 hover:bg-indigo-700 hover:ring-4 hover:ring-indigo-500/30 hover:scale-105"
            >
              <span class="mr-2"><Github :size="20" /></span>
              GitHubë¡œ 3ì´ˆ ë§Œì— ì‹œì‘í•˜ê¸°
              <div
                class="absolute inset-0 flex h-full w-full justify-center [transform:skew(-12deg)_translateX(-100%)] group-hover:duration-1000 group-hover:[transform:skew(-12deg)_translateX(100%)]"
              >
                <div class="relative h-full w-8 bg-white/20"></div>
              </div>
            </button>
          </div>
        </section>

        <section
          id="features"
          class="container mx-auto px-6 py-20 relative max-w-7xl"
        >
          <div class="text-center mb-16 max-w-3xl mx-auto">
            <h2 class="text-4xl font-bold mb-4 text-white">
              Dashê°€ í•´ê²°í•˜ëŠ” 3ê°€ì§€ ë¬¸ì œ
            </h2>
            <p class="text-lg text-slate-400">
              ìŠ¤í„°ë””ì›ë“¤ì˜ ê³ ì§ˆì ì¸ í˜ì¸ í¬ì¸íŠ¸ë¥¼ ì‹œì›í•˜ê²Œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
            </p>
          </div>

          <div class="flex flex-col gap-12">
            <div
              class="reveal bg-white/[0.03] border border-white/10 rounded-3xl p-8 md:p-10 flex flex-col gap-10"
            >
              <div
                class="text-center md:text-left flex flex-col md:flex-row gap-6 items-center md:items-start border-b border-white/5 pb-8"
              >
                <div
                  class="p-4 rounded-2xl bg-red-500/10 text-red-400 flex-shrink-0"
                >
                  <UploadCloud :size="40" />
                </div>
                <div class="flex-1">
                  <h3 class="text-2xl font-bold text-white mb-2">
                    Uploader (ì—…ë¡œë”)
                  </h3>
                  <p class="text-xl font-medium text-slate-300 mb-2">
                    "ë¬¸ì œ í’€ê¸°ë„ ë²…ì°¬ë°, íŒ¨í‚¤ì§€ ë§Œë“¤ê³  íŒŒì¼ëª… ë°”ê¾¸ê³ ... ë„ˆë¬´
                    ê·€ì°®ì•„ìš”."
                  </p>
                  <p class="text-slate-400">
                    ê·¸ëƒ¥
                    <span class="text-red-400 font-bold"
                      >ë°±ì¤€ì—ì„œ 'Main'ìœ¼ë¡œ í’€ê³  ì œì¶œí•˜ì„¸ìš”!<br
                    /></span>
                    <span
                      class="text-white font-bold underline decoration-indigo-500/50"
                      >íŒŒì¼ êµ¬ì¡°ë¥¼ ìë™ ë³€í™˜</span
                    >í•˜ê³ ,
                    <span
                      class="text-white font-bold underline decoration-red-500/50"
                      >ì‹¤íŒ¨í•œ ê¸°ë¡</span
                    >ê¹Œì§€ ì”ë””ë¡œ ë‚¨ê²¨ë“œë¦½ë‹ˆë‹¤.
                  </p>
                </div>
              </div>

              <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div
                  class="bg-slate-900/50 rounded-2xl border border-white/10 p-6 relative overflow-hidden"
                >
                  <div
                    class="absolute top-0 right-0 bg-indigo-500/20 text-indigo-300 text-[10px] px-2 py-1 rounded-bl-lg font-bold border-l border-b border-indigo-500/20"
                  >
                    Auto Refactoring
                  </div>
                  <div class="flex flex-col gap-4">
                    <div class="flex items-center gap-3 opacity-60">
                      <FileCode :size="24" class="text-slate-400" />
                      <div class="flex-1">
                        <p class="text-xs text-slate-500 mb-0.5">
                          My Local IDE
                        </p>
                        <p
                          class="text-sm text-slate-300 font-mono bg-slate-800 px-2 py-1 rounded w-fit"
                        >
                          class Main { ... }
                        </p>
                      </div>
                    </div>
                    <div class="flex justify-center relative h-8">
                      <div
                        class="absolute left-1/2 -translate-x-1/2 h-full w-0.5 bg-gradient-to-b from-slate-700 to-indigo-500"
                      ></div>
                      <ArrowDown
                        :size="20"
                        class="text-indigo-400 absolute bottom-0 bg-slate-900 rounded-full"
                      />
                    </div>
                    <div class="flex items-center gap-3">
                      <FolderTree :size="24" class="text-indigo-400" />
                      <div class="flex-1">
                        <p class="text-xs text-indigo-300 mb-0.5">
                          GitHub Repository (Auto)
                        </p>
                        <div
                          class="bg-indigo-950/30 border border-indigo-500/30 rounded p-2 font-mono text-xs space-y-1"
                        >
                          <p class="text-slate-400">ğŸ“‚ src/ssafy/week04/</p>
                          <p class="text-green-300 pl-4">ğŸ“„ BOJ_1000.java</p>
                          <p class="text-slate-500 pl-4 text-[10px]">
                            // package com.ssafy...
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="bg-slate-900/50 rounded-2xl border border-white/10 p-6 relative overflow-hidden"
                >
                  <div
                    class="absolute top-0 right-0 bg-red-500/20 text-red-300 text-[10px] px-2 py-1 rounded-bl-lg font-bold border-l border-b border-red-500/20"
                  >
                    Proof of Effort
                  </div>
                  <div class="flex flex-col justify-between h-full gap-4">
                    <div class="flex justify-between items-center">
                      <div class="flex items-center gap-2">
                        <div
                          class="w-2 h-2 rounded-full bg-red-500 animate-pulse"
                        ></div>
                        <span class="text-sm text-red-300 font-bold"
                          >í‹€ë ¸ìŠµë‹ˆë‹¤ (ì‹œê°„ ì´ˆê³¼)</span
                        >
                      </div>
                      <span class="text-xs text-slate-500"
                        >ì˜¤ëŠ˜, 3ì‹œê°„ ì†Œìš”</span
                      >
                    </div>

                    <div
                      class="bg-slate-800/50 rounded-lg p-3 flex items-center gap-3 border border-white/5"
                    >
                      <div class="bg-green-500/20 p-1.5 rounded-full">
                        <GitCommit :size="16" class="text-green-400" />
                      </div>
                      <div class="flex-1">
                        <p class="text-xs text-slate-300 font-mono">
                          feat: solve BOJ_2580 (Attempt 1)
                        </p>
                        <p class="text-[10px] text-slate-500">
                          Dash Bot committed 1 min ago
                        </p>
                      </div>
                    </div>

                    <div>
                      <p class="text-[10px] text-slate-400 mb-1">
                        Contribution Graph
                      </p>
                      <div class="flex gap-1">
                        <div class="w-4 h-4 rounded bg-slate-800"></div>
                        <div class="w-4 h-4 rounded bg-green-700"></div>
                        <div
                          class="w-4 h-4 rounded bg-yellow-600 border border-yellow-500/50 shadow-[0_0_10px_rgba(234,179,8,0.3)]"
                          title="ì‹¤íŒ¨í–ˆì§€ë§Œ ê¸°ë¡ë¨!"
                        ></div>
                        <div class="w-4 h-4 rounded bg-slate-800"></div>
                        <div class="w-4 h-4 rounded bg-slate-800"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              class="reveal bg-white/[0.03] border border-white/10 rounded-3xl p-8 md:p-10 flex flex-col gap-10"
            >
              <div
                class="text-center md:text-left flex flex-col md:flex-row gap-6 items-center md:items-start border-b border-white/5 pb-8"
              >
                <div
                  class="p-4 rounded-2xl bg-green-500/10 text-green-400 flex-shrink-0"
                >
                  <Bot :size="40" />
                </div>
                <div>
                  <h3 class="text-2xl font-bold text-white mb-2">
                    Reviewer (ë¦¬ë·°ì–´)
                  </h3>
                  <p class="text-xl font-medium text-slate-300 mb-2">
                    "ì£¼ì„ ì—†ëŠ” ì½”ë“œë¥¼ ì´í•´í•˜ëŠë¼ ì‹œê°„ì„ ë‹¤ ì¨ìš”."
                  </p>
                  <p class="text-slate-400">
                    ì† ì‹œì›í•˜ê²Œ,
                    <span class="text-green-400 font-bold"
                      >AIê°€ ë‹¬ì•„ì¤„ê²Œìš”!<br
                    /></span>
                    ì½”ë“œë¥¼ ì½ì§€ ì•Šì•„ë„ í’€ì´ì˜ í•µì‹¬ì„ 3ì´ˆ ë§Œì— íŒŒì•…í•˜ì„¸ìš”.
                  </p>
                </div>
              </div>

              <div
                class="w-full grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-6 items-center"
              >
                <div
                  class="bg-slate-900 rounded-xl p-6 border border-white/10 relative min-h-[160px] flex flex-col justify-center"
                >
                  <div
                    class="absolute -top-3 left-4 bg-slate-800 px-2 py-0.5 text-xs text-slate-400 rounded"
                  >
                    Before
                  </div>
                  <div class="space-y-2 opacity-40 blur-[1px]">
                    <div class="h-2 bg-slate-600 rounded w-3/4"></div>
                    <div class="h-2 bg-slate-600 rounded w-full"></div>
                    <div class="h-2 bg-slate-600 rounded w-1/2"></div>
                  </div>
                  <div
                    class="mt-4 text-center text-red-400 text-sm font-medium flex justify-center items-center gap-2"
                  >
                    <Search :size="16" /> ë¶„ì„ì— 10ë¶„ ì†Œìš”
                  </div>
                </div>

                <ArrowRight
                  :size="32"
                  class="text-slate-600 mx-auto rotate-90 md:rotate-0"
                />

                <div
                  class="bg-green-950/20 rounded-xl p-6 border border-green-500/20 relative min-h-[160px] flex flex-col justify-center"
                >
                  <div
                    class="absolute -top-3 left-4 bg-green-600 px-2 py-0.5 text-xs text-white rounded shadow-lg"
                  >
                    Dash AI
                  </div>
                  <div class="flex flex-wrap gap-2 mb-3">
                    <span
                      class="px-2 py-1 rounded bg-blue-500/20 text-blue-300 text-xs font-mono"
                      >#DP</span
                    >
                    <span
                      class="px-2 py-1 rounded bg-purple-500/20 text-purple-300 text-xs font-mono"
                      >#O(N)</span
                    >
                  </div>
                  <p class="text-sm text-slate-200 leading-relaxed">
                    "ì í™”ì‹ì„ ì´ìš©í•œ
                    <span class="text-green-300 font-bold">ë™ì  ê³„íšë²•</span>
                    í’€ì´ì…ë‹ˆë‹¤. <br />
                    ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ì¤‘ë³µ ê³„ì‚°ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤."
                  </p>
                </div>
              </div>
            </div>

            <div
              class="reveal bg-white/[0.03] border border-white/10 rounded-3xl p-8 md:p-10 flex flex-col gap-10"
            >
              <div
                class="text-center md:text-left flex flex-col md:flex-row gap-6 items-center md:items-start border-b border-white/5 pb-8"
              >
                <div
                  class="p-4 rounded-2xl bg-blue-500/10 text-blue-400 flex-shrink-0"
                >
                  <ClipboardList :size="40" />
                </div>
                <div>
                  <h3 class="text-2xl font-bold text-white mb-2">
                    Lead (ìŠ¤í„°ë””ì¥)
                  </h3>
                  <p class="text-xl font-medium text-slate-300 mb-2">
                    "ë§¤ì£¼ ë¬¸ì œë¥¼ ì •í•˜ëŠ” ê²ƒë„, ë ˆë²¨ ì°¨ì´ ì¡°ìœ¨ë„ í˜ë“¤ì–´ìš”."
                  </p>
                  <p class="text-slate-400">
                    ì •í™•í•œ ë¶„ì„ìœ¼ë¡œ,
                    <span class="text-blue-400 font-bold"
                      >AIê°€ ê³µí†µ ëª©í‘œë¥¼ ì¡ì•„ì¤˜ìš”!<br
                    /></span>
                    íŒ€ì›ë“¤ì˜ Solved.ac í‹°ì–´ì™€ ì·¨ì•½ì ì„ ë¶„ì„í•´, ì´ë²ˆ ì£¼ ìµœì ì˜
                    ë¬¸ì œë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.
                  </p>
                </div>
              </div>

              <div
                class="w-full grid grid-cols-1 md:grid-cols-[1fr_auto_1.2fr] gap-6 items-center"
              >
                <div
                  class="bg-slate-900 rounded-xl p-6 border border-white/10 relative min-h-[200px] flex flex-col justify-center"
                >
                  <div class="absolute top-3 left-4 text-xs text-slate-500">
                    ğŸ’¬ ìŠ¤í„°ë”” ë‹¨í†¡ë°©
                  </div>
                  <div class="space-y-3 mt-4">
                    <div class="flex gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-700"></div>
                      <div
                        class="bg-slate-800 p-2 rounded-r-lg rounded-bl-lg text-xs text-slate-300"
                      >
                        ì´ë²ˆ ì£¼ ë­ í’€ê¹Œìš”? ê³¨ë“œ?
                      </div>
                    </div>
                    <div class="flex gap-2 flex-row-reverse">
                      <div class="w-6 h-6 rounded-full bg-indigo-900"></div>
                      <div
                        class="bg-indigo-900/50 p-2 rounded-l-lg rounded-br-lg text-xs text-slate-300"
                      >
                        ì•„ì§ ì‹¤ë²„ë„ ì–´ë ¤ì›Œìš”.. ğŸ˜“
                      </div>
                    </div>
                    <div class="flex justify-center mt-2">
                      <span
                        class="text-[10px] text-red-400 bg-red-950/50 px-2 py-1 rounded-full"
                        >ê²°ì • ì¥ì• ...</span
                      >
                    </div>
                  </div>
                </div>

                <div class="flex justify-center text-slate-500">
                  <ArrowRight :size="32" class="hidden md:block" />
                  <ArrowDown :size="32" class="block md:hidden" />
                </div>

                <div
                  class="bg-blue-950/20 rounded-xl border border-blue-500/20 overflow-hidden flex flex-col min-h-[200px]"
                >
                  <div
                    class="p-4 border-b border-blue-500/10 bg-blue-900/10 flex justify-between items-center"
                  >
                    <span
                      class="text-xs font-bold text-blue-300 flex items-center gap-1"
                    >
                      <PieChart :size="12" /> Team Status
                    </span>
                    <span
                      class="text-[10px] text-red-300 bg-red-500/10 px-1.5 py-0.5 rounded"
                      >DP ì·¨ì•½ âš ï¸</span
                    >
                  </div>
                  <div
                    class="p-5 flex-1 flex flex-col justify-center items-center text-center"
                  >
                    <h4 class="text-white font-bold text-base mb-1">
                      Week 4: DP ê¸°ì´ˆ ë‹¤ì§€ê¸°
                    </h4>
                    <p class="text-xs text-slate-400 mb-3">
                      íŒ€ì› í‰ê·  í‹°ì–´(ì‹¤ë²„1) ë§ì¶¤<br />í•„ìˆ˜ ë¬¸ì œ 5ì„  ì¶”ì²œ
                    </p>
                    <button
                      class="text-xs bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors w-full shadow-lg shadow-blue-500/20"
                    >
                      ì»¤ë¦¬í˜ëŸ¼ ì ìš©í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section
          id="core"
          class="container mx-auto px-6 py-24 border-t border-white/5"
        >
          <div class="text-center mb-16">
            <h2 class="text-4xl font-bold mb-4 text-white">Dashì˜ í•µì‹¬ ê¸°ëŠ¥</h2>
            <p class="text-lg text-slate-400">
              ì½”ë”©ì—ë§Œ ì§‘ì¤‘í•˜ì„¸ìš”. ë‚˜ë¨¸ì§€ëŠ” Dashê°€ ì•Œì•„ì„œ í•©ë‹ˆë‹¤.
            </p>
          </div>

          <div
            class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto"
          >
            <div
              v-for="(feature, index) in detailedFeatures"
              :key="feature.title"
              class="group relative p-6 rounded-2xl border border-white/5 bg-white/[0.03] hover:bg-white/[0.06] transition-all duration-300 hover:-translate-y-1"
            >
              <div
                class="absolute inset-0 rounded-2xl bg-gradient-to-br from-indigo-500/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"
              ></div>
              <div class="relative z-10">
                <div
                  class="h-12 w-12 rounded-lg bg-indigo-500/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300"
                >
                  <component
                    :is="feature.icon"
                    :size="24"
                    class="text-indigo-400"
                  />
                </div>
                <h3 class="text-xl font-semibold mb-2 text-slate-200">
                  {{ feature.title }}
                </h3>
                <p class="text-slate-400 text-sm leading-relaxed">
                  {{ feature.description }}
                </p>
              </div>
            </div>
          </div>
        </section>

        <section class="container mx-auto px-6 py-24 border-t border-white/5">
          <div
            class="relative rounded-3xl bg-gradient-to-b from-indigo-900/20 to-slate-900/50 border border-indigo-500/20 p-12 overflow-hidden text-center"
          >
            <div
              class="absolute top-0 left-1/2 -translate-x-1/2 w-1/2 h-1/2 bg-indigo-500/20 blur-[100px] rounded-full"
            ></div>
            <div class="relative z-10 max-w-2xl mx-auto">
              <h2 class="text-3xl md:text-4xl font-bold mb-6 text-white">
                ì½”ë”©ì—ë§Œ ì§‘ì¤‘í•˜ì„¸ìš”.<br />ë‚˜ë¨¸ì§€ëŠ” Dashê°€ í•©ë‹ˆë‹¤.
              </h2>

              <button
                @click="handleLogin"
                class="inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full bg-white text-slate-950 hover:bg-slate-200 transition-all font-bold text-lg hover:shadow-[0_0_20px_rgba(255,255,255,0.3)]"
              >
                <Github :size="20" />
                ì§€ê¸ˆ ë¬´ë£Œë¡œ Dash ì‹œì‘í•˜ê¸°
              </button>
            </div>
          </div>
        </section>
      </template>

      <template v-else-if="authChecked && user">
        <section class="container mx-auto px-6 py-20">
          <div
            class="max-w-3xl mx-auto bg-gradient-to-br from-slate-900/60 to-slate-800/30 border border-white/6 rounded-3xl p-12 shadow-xl text-center"
          >
            <div class="flex flex-col items-center gap-4">
              <div class="bg-indigo-700/20 p-4 rounded-full">
                <ClipboardList :size="48" class="text-indigo-300" />
              </div>
              <h2 class="text-3xl md:text-4xl font-extrabold text-white">
                ëŒ€ì‹œë³´ë“œ
              </h2>
              <p class="text-slate-300 max-w-xl">ê°€ì…ëœ ìŠ¤í„°ë””ê°€ ì—†ìŠµë‹ˆë‹¤.</p>

              <div class="mt-6 flex gap-4 justify-center">
                <button
                  class="px-5 py-3 rounded-full bg-indigo-600 text-white font-semibold shadow-lg hover:bg-indigo-500 transition"
                  @click="goToDashboard"
                >
                  ìŠ¤í„°ë”” ì°¾ê¸°
                </button>
                <button
                  @click="goToDashboard"
                  class="px-5 py-3 rounded-full bg-white/5 text-white border border-white/10 hover:bg-white/10 transition"
                >
                  ìƒˆ ìŠ¤í„°ë”” ë§Œë“¤ê¸°
                </button>
              </div>

              <p class="text-xs text-slate-500 mt-4">
                Tip: GitHub ì—°ë™ í›„ ìë™ ì»¤ë°‹ìœ¼ë¡œ í™œë™ì´ ê¸°ë¡ë©ë‹ˆë‹¤.
              </p>
            </div>
          </div>
        </section>
      </template>
    </main>

    <footer class="border-t border-white/5 py-8 bg-slate-950">
      <div class="container mx-auto px-6 text-center text-sm text-slate-500">
        Â© 2025 DASH. All rights reserved.
      </div>
    </footer>
  </div>
</template>

<script setup>
import {
  ref,
  computed,
  onMounted,
  onBeforeUnmount,
  watch,
  nextTick,
} from "vue";
import {
  Code2,
  Github,
  UploadCloud,
  Bot,
  ClipboardList,
  ArrowRight,
  ArrowDown,
  Search,
  PieChart,
  FileCode,
  FolderTree,
  GitCommit,
} from "lucide-vue-next";

const detailedFeatures = ref([
  {
    icon: UploadCloud,
    title: "ì™„ì „ ìë™í™”",
    description:
      "ë°±ì¤€ ë¬¸ì œ ì œì¶œ ì‹œ ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ ìƒê´€ì—†ì´ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ GitHubì— ì»¤ë°‹í•˜ê³  Dash ëŒ€ì‹œë³´ë“œë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.",
  },
  {
    icon: Bot,
    title: "AI ìë™ ìš”ì•½",
    description:
      "ì œì¶œëœ ì½”ë“œë¥¼ Dash AIê°€ ë¶„ì„í•˜ì—¬ í’€ì´ì˜ í•µì‹¬ ìš”ì•½, ì‹œê°„/ê³µê°„ ë³µì¡ë„, ì‚¬ìš© ì•Œê³ ë¦¬ì¦˜ íƒœê·¸ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.",
  },
  {
    icon: FolderTree,
    title: "ê¹”ë”í•œ ì½”ë“œ ê´€ë¦¬",
    description:
      "IDEì—ì„œ Mainìœ¼ë¡œ í’€ì–´ë„ ê´œì°®ìŠµë‹ˆë‹¤. ìë™ìœ¼ë¡œ íŒ¨í‚¤ì§€ì™€ íŒŒì¼ëª…ì„ ìŠ¤í„°ë”” ê·œì¹™ì— ë§ê²Œ ë³€í™˜í•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤.",
  },
  {
    icon: PieChart,
    title: "ë°ì´í„° ê¸°ë°˜ ëª©í‘œ",
    description:
      "Solved.ac ì—°ë™ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í„°ë””ì›ë“¤ì˜ ì·¨ì•½í•œ ìœ í˜•ì„ ë¶„ì„í•˜ê³ , íš¨ê³¼ì ì¸ ê³µí†µ í•™ìŠµ ëª©í‘œë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.",
  },
  {
    icon: Search,
    title: "í†µí•© ê²€ìƒ‰",
    description:
      "ìŠ¤í„°ë””ì›ë“¤ì´ ì œì¶œí•œ ëª¨ë“  í’€ì´ì™€ AIê°€ ìš”ì•½í•œ ë‚´ìš©ì„ í‚¤ì›Œë“œ(ë¬¸ì œ ë²ˆí˜¸, íƒœê·¸, í’€ì´ ë‚´ìš©)ë¡œ ì¦‰ì‹œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  },
  {
    icon: GitCommit,
    title: "ë…¸ë ¥ì˜ ê¸°ë¡",
    description:
      "ì‹¤íŒ¨í•œ ì œì¶œë„ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ê³ ë¯¼ê³¼ ì‹œë„ë¥¼ ì”ë””(Contribution)ì™€ ëŒ€ì‹œë³´ë“œì— ì‹œê°ì ìœ¼ë¡œ ë‚¨ê²¨ë“œë¦½ë‹ˆë‹¤.",
  },
]);

import { useAuth } from "../composables/useAuth";
import { authApi } from "../api/auth";

const { user, authChecked } = useAuth();
// const API_BASE = import.meta.env.VITE_API_BASE_URL || "http://localhost:8080";

let revealObserver = null;
function initReveal() {
  const els = document.querySelectorAll(".reveal");
  if (!els || els.length === 0) return;

  if (revealObserver) return;

  revealObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("reveal-visible");
          revealObserver.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.12 }
  );

  els.forEach((el, i) => {
    el.style.transitionDelay = `${i * 120}ms`;
    revealObserver.observe(el);
  });
}

watch(
  authChecked,
  (val) => {
    if (val) {
      nextTick(() => initReveal());
    }
  },
  { immediate: true }
);

onBeforeUnmount(() => {
  if (revealObserver) {
    revealObserver.disconnect();
    revealObserver = null;
  }
});

const scrollToSection = (id) => {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
};

const goHome = () => {
  window.location.href = "/";
};
const goToDashboard = () => {
  window.location.href = "/dashboard";
};
const handleLogin = () => {
  window.location.href = `/oauth2/authorization/github`;
};

const toggleProfileMenu = () => {};

const goToProfile = () => {
  window.location.href = "/profile";
};

const handleLogout = async () => {
  try {
    await authApi.logout();
  } catch (e) {
    console.error("Logout failed:", e);
  } finally {
    window.location.href = "/";
  }
};
</script>

<style scoped>
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  opacity: 0;
}

.slide-down-enter-from,
.slide-down-leave-to {
  opacity: 0;
  transform: translateY(-6px) scale(0.98);
}
.slide-down-enter-to,
.slide-down-leave-from {
  opacity: 1;
  transform: translateY(0) scale(1);
}
.slide-down-enter-active,
.slide-down-leave-active {
  transition: transform 180ms cubic-bezier(0.16, 1, 0.3, 1), opacity 160ms ease;
}

.reveal {
  opacity: 0;
  transform: translateY(18px);
  will-change: transform, opacity;
  transition: opacity 560ms cubic-bezier(0.16, 1, 0.3, 1),
    transform 560ms cubic-bezier(0.16, 1, 0.3, 1);
}
.reveal-visible {
  opacity: 1;
  transform: translateY(0);
}
</style>
